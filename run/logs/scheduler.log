2025-11-14 20:45:50 | [32mINFO    [0m | root | Logging initialized at INFO level
2025-11-14 20:45:50 | [32mINFO    [0m | backend.core.config | Configuration loaded:
2025-11-14 20:45:50 | [32mINFO    [0m | backend.core.config |   Environment: development
2025-11-14 20:45:50 | [32mINFO    [0m | backend.core.config |   Log Level: INFO
2025-11-14 20:45:50 | [32mINFO    [0m | backend.core.config |   Internal DB: {'host': 'localhost', 'port': 5440, 'user': 'ai_core', 'database': 'ai_core'}
2025-11-14 20:45:50 | [32mINFO    [0m | backend.core.config |   MySQL Lab: {'host': '127.0.0.1', 'port': 3307, 'user': 'root', 'database': 'labdb'}
2025-11-14 20:45:50 | [32mINFO    [0m | backend.core.config |   PostgreSQL Lab: {'host': '127.0.0.1', 'port': 5433, 'user': 'postgres', 'database': 'labdb'}
2025-11-14 20:45:50 | [32mINFO    [0m | backend.core.config |   Redis: localhost:6379
2025-11-14 20:45:50 | [32mINFO    [0m | backend.core.config |   Collector Interval: 300s
2025-11-14 20:45:50 | [32mINFO    [0m | backend.core.config |   Analyzer Interval: 600s
2025-11-14 20:45:50 | [32mINFO    [0m | backend.core.config |   AI Provider: stub
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ | ============================================================
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ | Starting Collector Scheduler
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ | Collection interval: 1 minutes
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ | ============================================================
2025-11-14 20:45:51 | [32mINFO    [0m | apscheduler.scheduler | Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-11-14 20:45:51 | [32mINFO    [0m | apscheduler.scheduler | Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-11-14 20:45:51 | [32mINFO    [0m | apscheduler.scheduler | Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-11-14 20:45:51 | [32mINFO    [0m | apscheduler.scheduler | Added job "MySQL Slow Query Collector" to job store "default"
2025-11-14 20:45:51 | [32mINFO    [0m | apscheduler.scheduler | Added job "PostgreSQL Slow Query Collector" to job store "default"
2025-11-14 20:45:51 | [32mINFO    [0m | apscheduler.scheduler | Added job "Query Analyzer" to job store "default"
2025-11-14 20:45:51 | [32mINFO    [0m | apscheduler.scheduler | Scheduler started
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ | âœ“ Scheduler started successfully
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ |   MySQL collector: every 1 minutes
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ |   PostgreSQL collector: every 1 minutes
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ |   Query analyzer: every 2 minutes
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ | Running initial collection and analysis...
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ | Starting MySQL slow query collection...
2025-11-14 20:45:51 | [31mERROR   [0m | backend.services.mysql_collector | âœ— MySQL connection failed: 2003 (HY000): Can't connect to MySQL server on '127.0.0.1:3307' (111)
/home/msiddi/Documents/personal/dbpower-ai-cloud/backend/services/scheduler.py:46: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  self.last_mysql_run = datetime.utcnow()
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ | âœ“ MySQL collection completed: 0 queries collected
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ | Starting PostgreSQL slow query collection...
2025-11-14 20:45:51 | [31mERROR   [0m | backend.services.postgres_collector | âœ— PostgreSQL connection failed: connection to server at "127.0.0.1", port 5433 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

/home/msiddi/Documents/personal/dbpower-ai-cloud/backend/services/scheduler.py:58: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
  self.last_postgres_run = datetime.utcnow()
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ | âœ“ PostgreSQL collection completed: 0 queries collected
2025-11-14 20:45:51 | [32mINFO    [0m | __main__ | Starting pending query analysis...
2025-11-14 20:45:51 | [31mERROR   [0m | __main__ | âœ— Query analysis failed: (psycopg2.errors.UndefinedTable) relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^

[SQL: SELECT slow_queries.id AS slow_queries_id, slow_queries.fingerprint AS slow_queries_fingerprint, slow_queries.source_db_type AS slow_queries_source_db_type, slow_queries.source_db_host AS slow_queries_source_db_host, slow_queries.duration_ms AS slow_queries_duration_ms, slow_queries.captured_at AS slow_queries_captured_at, slow_queries.status AS slow_queries_status 
FROM slow_queries 
WHERE slow_queries.status = %(status_1)s 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'NEW', 'param_1': 50}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedTable: relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/backend/services/scheduler.py", line 68, in analyze_pending_queries
    count = analyzer.analyze_all_pending(limit=50)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/backend/services/analyzer.py", line 444, in analyze_all_pending
    ).limit(limit).all()
                   ^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2693, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^

[SQL: SELECT slow_queries.id AS slow_queries_id, slow_queries.fingerprint AS slow_queries_fingerprint, slow_queries.source_db_type AS slow_queries_source_db_type, slow_queries.source_db_host AS slow_queries_source_db_host, slow_queries.duration_ms AS slow_queries_duration_ms, slow_queries.captured_at AS slow_queries_captured_at, slow_queries.status AS slow_queries_status 
FROM slow_queries 
WHERE slow_queries.status = %(status_1)s 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'NEW', 'param_1': 50}]
(Background on this error at: https://sqlalche.me/e/20/f405)

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:46:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:46:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:47:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:45:51.179201', 'postgres_last_run': '2025-11-14T19:45:51.179402', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:46:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:46:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:47:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:45:51.179201', 'postgres_last_run': '2025-11-14T19:45:51.179402', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:46:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:46:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:47:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:45:51.179201', 'postgres_last_run': '2025-11-14T19:45:51.179402', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:46:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:46:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:47:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:45:51.179201', 'postgres_last_run': '2025-11-14T19:45:51.179402', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:46:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:46:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:47:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:45:51.179201', 'postgres_last_run': '2025-11-14T19:45:51.179402', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}
2025-11-14 20:46:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:46:51 CET)" (scheduled at 2025-11-14 20:46:51.177551+01:00)
2025-11-14 20:46:51 | [32mINFO    [0m | __main__ | Starting MySQL slow query collection...
2025-11-14 20:46:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:47:51 CET)" (scheduled at 2025-11-14 20:46:51.177647+01:00)
2025-11-14 20:46:51 | [32mINFO    [0m | __main__ | Starting PostgreSQL slow query collection...
2025-11-14 20:46:51 | [31mERROR   [0m | backend.services.mysql_collector | âœ— MySQL connection failed: 2003 (HY000): Can't connect to MySQL server on '127.0.0.1:3307' (111)
2025-11-14 20:46:51 | [31mERROR   [0m | backend.services.postgres_collector | âœ— PostgreSQL connection failed: connection to server at "127.0.0.1", port 5433 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

2025-11-14 20:46:51 | [32mINFO    [0m | __main__ | âœ“ MySQL collection completed: 0 queries collected
2025-11-14 20:46:51 | [32mINFO    [0m | __main__ | âœ“ PostgreSQL collection completed: 0 queries collected
2025-11-14 20:46:51 | [32mINFO    [0m | apscheduler.executors.default | Job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:47:51 CET)" executed successfully
2025-11-14 20:46:51 | [32mINFO    [0m | apscheduler.executors.default | Job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:47:51 CET)" executed successfully

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:47:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:47:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:47:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:46:51.183412', 'postgres_last_run': '2025-11-14T19:46:51.183650', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:47:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:47:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:47:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:46:51.183412', 'postgres_last_run': '2025-11-14T19:46:51.183650', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:47:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:47:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:47:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:46:51.183412', 'postgres_last_run': '2025-11-14T19:46:51.183650', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:47:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:47:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:47:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:46:51.183412', 'postgres_last_run': '2025-11-14T19:46:51.183650', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:47:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:47:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:47:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:46:51.183412', 'postgres_last_run': '2025-11-14T19:46:51.183650', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:47:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:47:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:47:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:46:51.183412', 'postgres_last_run': '2025-11-14T19:46:51.183650', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}
2025-11-14 20:47:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:48:51 CET)" (scheduled at 2025-11-14 20:47:51.177551+01:00)
2025-11-14 20:47:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:48:51 CET)" (scheduled at 2025-11-14 20:47:51.177647+01:00)
2025-11-14 20:47:51 | [32mINFO    [0m | __main__ | Starting PostgreSQL slow query collection...
2025-11-14 20:47:51 | [32mINFO    [0m | __main__ | Starting MySQL slow query collection...
2025-11-14 20:47:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "Query Analyzer (trigger: interval[0:02:00], next run at: 2025-11-14 20:49:51 CET)" (scheduled at 2025-11-14 20:47:51.177702+01:00)
2025-11-14 20:47:51 | [31mERROR   [0m | backend.services.postgres_collector | âœ— PostgreSQL connection failed: connection to server at "127.0.0.1", port 5433 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

2025-11-14 20:47:51 | [31mERROR   [0m | backend.services.mysql_collector | âœ— MySQL connection failed: 2003 (HY000): Can't connect to MySQL server on '127.0.0.1:3307' (111)
2025-11-14 20:47:51 | [32mINFO    [0m | __main__ | âœ“ MySQL collection completed: 0 queries collected
2025-11-14 20:47:51 | [32mINFO    [0m | apscheduler.executors.default | Job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:48:51 CET)" executed successfully
2025-11-14 20:47:51 | [32mINFO    [0m | __main__ | Starting pending query analysis...
2025-11-14 20:47:51 | [32mINFO    [0m | __main__ | âœ“ PostgreSQL collection completed: 0 queries collected
2025-11-14 20:47:51 | [32mINFO    [0m | apscheduler.executors.default | Job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:48:51 CET)" executed successfully
2025-11-14 20:47:51 | [31mERROR   [0m | __main__ | âœ— Query analysis failed: (psycopg2.errors.UndefinedTable) relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^

[SQL: SELECT slow_queries.id AS slow_queries_id, slow_queries.fingerprint AS slow_queries_fingerprint, slow_queries.source_db_type AS slow_queries_source_db_type, slow_queries.source_db_host AS slow_queries_source_db_host, slow_queries.duration_ms AS slow_queries_duration_ms, slow_queries.captured_at AS slow_queries_captured_at, slow_queries.status AS slow_queries_status 
FROM slow_queries 
WHERE slow_queries.status = %(status_1)s 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'NEW', 'param_1': 50}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedTable: relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/backend/services/scheduler.py", line 68, in analyze_pending_queries
    count = analyzer.analyze_all_pending(limit=50)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/backend/services/analyzer.py", line 444, in analyze_all_pending
    ).limit(limit).all()
                   ^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2693, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^

[SQL: SELECT slow_queries.id AS slow_queries_id, slow_queries.fingerprint AS slow_queries_fingerprint, slow_queries.source_db_type AS slow_queries_source_db_type, slow_queries.source_db_host AS slow_queries_source_db_host, slow_queries.duration_ms AS slow_queries_duration_ms, slow_queries.captured_at AS slow_queries_captured_at, slow_queries.status AS slow_queries_status 
FROM slow_queries 
WHERE slow_queries.status = %(status_1)s 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'NEW', 'param_1': 50}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-14 20:47:51 | [32mINFO    [0m | apscheduler.executors.default | Job "Query Analyzer (trigger: interval[0:02:00], next run at: 2025-11-14 20:49:51 CET)" executed successfully

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:48:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:48:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:49:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:47:51.180119', 'postgres_last_run': '2025-11-14T19:47:51.180048', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:48:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:48:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:49:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:47:51.180119', 'postgres_last_run': '2025-11-14T19:47:51.180048', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:48:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:48:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:49:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:47:51.180119', 'postgres_last_run': '2025-11-14T19:47:51.180048', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:48:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:48:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:49:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:47:51.180119', 'postgres_last_run': '2025-11-14T19:47:51.180048', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:48:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:48:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:49:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:47:51.180119', 'postgres_last_run': '2025-11-14T19:47:51.180048', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:48:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:48:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:49:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:47:51.180119', 'postgres_last_run': '2025-11-14T19:47:51.180048', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}
2025-11-14 20:48:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:49:51 CET)" (scheduled at 2025-11-14 20:48:51.177551+01:00)
2025-11-14 20:48:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:49:51 CET)" (scheduled at 2025-11-14 20:48:51.177647+01:00)
2025-11-14 20:48:51 | [32mINFO    [0m | __main__ | Starting MySQL slow query collection...
2025-11-14 20:48:51 | [32mINFO    [0m | __main__ | Starting PostgreSQL slow query collection...
2025-11-14 20:48:51 | [31mERROR   [0m | backend.services.postgres_collector | âœ— PostgreSQL connection failed: connection to server at "127.0.0.1", port 5433 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

2025-11-14 20:48:51 | [31mERROR   [0m | backend.services.mysql_collector | âœ— MySQL connection failed: 2003 (HY000): Can't connect to MySQL server on '127.0.0.1:3307' (111)
2025-11-14 20:48:51 | [32mINFO    [0m | __main__ | âœ“ PostgreSQL collection completed: 0 queries collected
2025-11-14 20:48:51 | [32mINFO    [0m | __main__ | âœ“ MySQL collection completed: 0 queries collected
2025-11-14 20:48:51 | [32mINFO    [0m | apscheduler.executors.default | Job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:49:51 CET)" executed successfully
2025-11-14 20:48:51 | [32mINFO    [0m | apscheduler.executors.default | Job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:49:51 CET)" executed successfully

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:49:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:49:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:49:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:48:51.178888', 'postgres_last_run': '2025-11-14T19:48:51.178808', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:49:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:49:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:49:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:48:51.178888', 'postgres_last_run': '2025-11-14T19:48:51.178808', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:49:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:49:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:49:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:48:51.178888', 'postgres_last_run': '2025-11-14T19:48:51.178808', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:49:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:49:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:49:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:48:51.178888', 'postgres_last_run': '2025-11-14T19:48:51.178808', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:49:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:49:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:49:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:48:51.178888', 'postgres_last_run': '2025-11-14T19:48:51.178808', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:49:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:49:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:49:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:48:51.178888', 'postgres_last_run': '2025-11-14T19:48:51.178808', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}
2025-11-14 20:49:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:50:51 CET)" (scheduled at 2025-11-14 20:49:51.177551+01:00)
2025-11-14 20:49:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:50:51 CET)" (scheduled at 2025-11-14 20:49:51.177647+01:00)
2025-11-14 20:49:51 | [32mINFO    [0m | __main__ | Starting PostgreSQL slow query collection...
2025-11-14 20:49:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "Query Analyzer (trigger: interval[0:02:00], next run at: 2025-11-14 20:51:51 CET)" (scheduled at 2025-11-14 20:49:51.177702+01:00)
2025-11-14 20:49:51 | [32mINFO    [0m | __main__ | Starting pending query analysis...
2025-11-14 20:49:51 | [32mINFO    [0m | __main__ | Starting MySQL slow query collection...
2025-11-14 20:49:51 | [31mERROR   [0m | backend.services.postgres_collector | âœ— PostgreSQL connection failed: connection to server at "127.0.0.1", port 5433 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

2025-11-14 20:49:51 | [32mINFO    [0m | __main__ | âœ“ PostgreSQL collection completed: 0 queries collected
2025-11-14 20:49:51 | [32mINFO    [0m | apscheduler.executors.default | Job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:50:51 CET)" executed successfully
2025-11-14 20:49:51 | [31mERROR   [0m | backend.services.mysql_collector | âœ— MySQL connection failed: 2003 (HY000): Can't connect to MySQL server on '127.0.0.1:3307' (111)
2025-11-14 20:49:51 | [32mINFO    [0m | __main__ | âœ“ MySQL collection completed: 0 queries collected
2025-11-14 20:49:51 | [32mINFO    [0m | apscheduler.executors.default | Job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:50:51 CET)" executed successfully
2025-11-14 20:49:51 | [31mERROR   [0m | __main__ | âœ— Query analysis failed: (psycopg2.errors.UndefinedTable) relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^

[SQL: SELECT slow_queries.id AS slow_queries_id, slow_queries.fingerprint AS slow_queries_fingerprint, slow_queries.source_db_type AS slow_queries_source_db_type, slow_queries.source_db_host AS slow_queries_source_db_host, slow_queries.duration_ms AS slow_queries_duration_ms, slow_queries.captured_at AS slow_queries_captured_at, slow_queries.status AS slow_queries_status 
FROM slow_queries 
WHERE slow_queries.status = %(status_1)s 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'NEW', 'param_1': 50}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedTable: relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/backend/services/scheduler.py", line 68, in analyze_pending_queries
    count = analyzer.analyze_all_pending(limit=50)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/backend/services/analyzer.py", line 444, in analyze_all_pending
    ).limit(limit).all()
                   ^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2693, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^

[SQL: SELECT slow_queries.id AS slow_queries_id, slow_queries.fingerprint AS slow_queries_fingerprint, slow_queries.source_db_type AS slow_queries_source_db_type, slow_queries.source_db_host AS slow_queries_source_db_host, slow_queries.duration_ms AS slow_queries_duration_ms, slow_queries.captured_at AS slow_queries_captured_at, slow_queries.status AS slow_queries_status 
FROM slow_queries 
WHERE slow_queries.status = %(status_1)s 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'NEW', 'param_1': 50}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-14 20:49:51 | [32mINFO    [0m | apscheduler.executors.default | Job "Query Analyzer (trigger: interval[0:02:00], next run at: 2025-11-14 20:51:51 CET)" executed successfully

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:50:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:50:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:51:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:49:51.180258', 'postgres_last_run': '2025-11-14T19:49:51.179762', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:50:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:50:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:51:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:49:51.180258', 'postgres_last_run': '2025-11-14T19:49:51.179762', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:50:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:50:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:51:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:49:51.180258', 'postgres_last_run': '2025-11-14T19:49:51.179762', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:50:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:50:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:51:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:49:51.180258', 'postgres_last_run': '2025-11-14T19:49:51.179762', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:50:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:50:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:51:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:49:51.180258', 'postgres_last_run': '2025-11-14T19:49:51.179762', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:50:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:50:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:51:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:49:51.180258', 'postgres_last_run': '2025-11-14T19:49:51.179762', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}
2025-11-14 20:50:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:51:51 CET)" (scheduled at 2025-11-14 20:50:51.177551+01:00)
2025-11-14 20:50:51 | [32mINFO    [0m | __main__ | Starting MySQL slow query collection...
2025-11-14 20:50:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:51:51 CET)" (scheduled at 2025-11-14 20:50:51.177647+01:00)
2025-11-14 20:50:51 | [32mINFO    [0m | __main__ | Starting PostgreSQL slow query collection...
2025-11-14 20:50:51 | [31mERROR   [0m | backend.services.mysql_collector | âœ— MySQL connection failed: 2003 (HY000): Can't connect to MySQL server on '127.0.0.1:3307' (111)
2025-11-14 20:50:51 | [31mERROR   [0m | backend.services.postgres_collector | âœ— PostgreSQL connection failed: connection to server at "127.0.0.1", port 5433 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

2025-11-14 20:50:51 | [32mINFO    [0m | __main__ | âœ“ MySQL collection completed: 0 queries collected
2025-11-14 20:50:51 | [32mINFO    [0m | __main__ | âœ“ PostgreSQL collection completed: 0 queries collected
2025-11-14 20:50:51 | [32mINFO    [0m | apscheduler.executors.default | Job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:51:51 CET)" executed successfully
2025-11-14 20:50:51 | [32mINFO    [0m | apscheduler.executors.default | Job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:51:51 CET)" executed successfully

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:51:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:51:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:51:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:50:51.182833', 'postgres_last_run': '2025-11-14T19:50:51.183221', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:51:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:51:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:51:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:50:51.182833', 'postgres_last_run': '2025-11-14T19:50:51.183221', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:51:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:51:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:51:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:50:51.182833', 'postgres_last_run': '2025-11-14T19:50:51.183221', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:51:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:51:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:51:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:50:51.182833', 'postgres_last_run': '2025-11-14T19:50:51.183221', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:51:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:51:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:51:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:50:51.182833', 'postgres_last_run': '2025-11-14T19:50:51.183221', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:51:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:51:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:51:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:50:51.182833', 'postgres_last_run': '2025-11-14T19:50:51.183221', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}
2025-11-14 20:51:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:52:51 CET)" (scheduled at 2025-11-14 20:51:51.177551+01:00)
2025-11-14 20:51:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:52:51 CET)" (scheduled at 2025-11-14 20:51:51.177647+01:00)
2025-11-14 20:51:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "Query Analyzer (trigger: interval[0:02:00], next run at: 2025-11-14 20:53:51 CET)" (scheduled at 2025-11-14 20:51:51.177702+01:00)
2025-11-14 20:51:51 | [32mINFO    [0m | __main__ | Starting MySQL slow query collection...
2025-11-14 20:51:51 | [32mINFO    [0m | __main__ | Starting PostgreSQL slow query collection...
2025-11-14 20:51:51 | [32mINFO    [0m | __main__ | Starting pending query analysis...
2025-11-14 20:51:51 | [31mERROR   [0m | backend.services.mysql_collector | âœ— MySQL connection failed: 2003 (HY000): Can't connect to MySQL server on '127.0.0.1:3307' (111)
2025-11-14 20:51:51 | [31mERROR   [0m | backend.services.postgres_collector | âœ— PostgreSQL connection failed: connection to server at "127.0.0.1", port 5433 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

2025-11-14 20:51:51 | [32mINFO    [0m | __main__ | âœ“ MySQL collection completed: 0 queries collected
2025-11-14 20:51:51 | [32mINFO    [0m | apscheduler.executors.default | Job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:52:51 CET)" executed successfully
2025-11-14 20:51:51 | [32mINFO    [0m | __main__ | âœ“ PostgreSQL collection completed: 0 queries collected
2025-11-14 20:51:51 | [32mINFO    [0m | apscheduler.executors.default | Job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:52:51 CET)" executed successfully
2025-11-14 20:51:51 | [31mERROR   [0m | __main__ | âœ— Query analysis failed: (psycopg2.errors.UndefinedTable) relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^

[SQL: SELECT slow_queries.id AS slow_queries_id, slow_queries.fingerprint AS slow_queries_fingerprint, slow_queries.source_db_type AS slow_queries_source_db_type, slow_queries.source_db_host AS slow_queries_source_db_host, slow_queries.duration_ms AS slow_queries_duration_ms, slow_queries.captured_at AS slow_queries_captured_at, slow_queries.status AS slow_queries_status 
FROM slow_queries 
WHERE slow_queries.status = %(status_1)s 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'NEW', 'param_1': 50}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedTable: relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/backend/services/scheduler.py", line 68, in analyze_pending_queries
    count = analyzer.analyze_all_pending(limit=50)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/backend/services/analyzer.py", line 444, in analyze_all_pending
    ).limit(limit).all()
                   ^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2693, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^

[SQL: SELECT slow_queries.id AS slow_queries_id, slow_queries.fingerprint AS slow_queries_fingerprint, slow_queries.source_db_type AS slow_queries_source_db_type, slow_queries.source_db_host AS slow_queries_source_db_host, slow_queries.duration_ms AS slow_queries_duration_ms, slow_queries.captured_at AS slow_queries_captured_at, slow_queries.status AS slow_queries_status 
FROM slow_queries 
WHERE slow_queries.status = %(status_1)s 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'NEW', 'param_1': 50}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-14 20:51:51 | [32mINFO    [0m | apscheduler.executors.default | Job "Query Analyzer (trigger: interval[0:02:00], next run at: 2025-11-14 20:53:51 CET)" executed successfully

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:52:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:52:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:53:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:51:51.184421', 'postgres_last_run': '2025-11-14T19:51:51.184755', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:52:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:52:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:53:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:51:51.184421', 'postgres_last_run': '2025-11-14T19:51:51.184755', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:52:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:52:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:53:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:51:51.184421', 'postgres_last_run': '2025-11-14T19:51:51.184755', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:52:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:52:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:53:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:51:51.184421', 'postgres_last_run': '2025-11-14T19:51:51.184755', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:52:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:52:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:53:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:51:51.184421', 'postgres_last_run': '2025-11-14T19:51:51.184755', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:52:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:52:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:53:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:51:51.184421', 'postgres_last_run': '2025-11-14T19:51:51.184755', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}
2025-11-14 20:52:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:53:51 CET)" (scheduled at 2025-11-14 20:52:51.177551+01:00)
2025-11-14 20:52:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:53:51 CET)" (scheduled at 2025-11-14 20:52:51.177647+01:00)
2025-11-14 20:52:51 | [32mINFO    [0m | __main__ | Starting MySQL slow query collection...
2025-11-14 20:52:51 | [32mINFO    [0m | __main__ | Starting PostgreSQL slow query collection...
2025-11-14 20:52:51 | [31mERROR   [0m | backend.services.postgres_collector | âœ— PostgreSQL connection failed: connection to server at "127.0.0.1", port 5433 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

2025-11-14 20:52:51 | [31mERROR   [0m | backend.services.mysql_collector | âœ— MySQL connection failed: 2003 (HY000): Can't connect to MySQL server on '127.0.0.1:3307' (111)
2025-11-14 20:52:51 | [32mINFO    [0m | __main__ | âœ“ PostgreSQL collection completed: 0 queries collected
2025-11-14 20:52:51 | [32mINFO    [0m | __main__ | âœ“ MySQL collection completed: 0 queries collected
2025-11-14 20:52:51 | [32mINFO    [0m | apscheduler.executors.default | Job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:53:51 CET)" executed successfully
2025-11-14 20:52:51 | [32mINFO    [0m | apscheduler.executors.default | Job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:53:51 CET)" executed successfully

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:53:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:53:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:53:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:52:51.182794', 'postgres_last_run': '2025-11-14T19:52:51.182541', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:53:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:53:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:53:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:52:51.182794', 'postgres_last_run': '2025-11-14T19:52:51.182541', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:53:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:53:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:53:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:52:51.182794', 'postgres_last_run': '2025-11-14T19:52:51.182541', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:53:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:53:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:53:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:52:51.182794', 'postgres_last_run': '2025-11-14T19:52:51.182541', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:53:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:53:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:53:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:52:51.182794', 'postgres_last_run': '2025-11-14T19:52:51.182541', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}

Scheduler Status: {'is_running': True, 'jobs': [{'id': 'mysql_collector', 'name': 'MySQL Slow Query Collector', 'next_run': '2025-11-14T20:53:51.177551+01:00'}, {'id': 'postgres_collector', 'name': 'PostgreSQL Slow Query Collector', 'next_run': '2025-11-14T20:53:51.177647+01:00'}, {'id': 'query_analyzer', 'name': 'Query Analyzer', 'next_run': '2025-11-14T20:53:51.177702+01:00'}], 'mysql_last_run': '2025-11-14T19:52:51.182794', 'postgres_last_run': '2025-11-14T19:52:51.182541', 'analyzer_last_run': None, 'mysql_total_collected': 0, 'postgres_total_collected': 0, 'total_analyzed': 0}
2025-11-14 20:53:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:54:51 CET)" (scheduled at 2025-11-14 20:53:51.177551+01:00)
2025-11-14 20:53:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:54:51 CET)" (scheduled at 2025-11-14 20:53:51.177647+01:00)
2025-11-14 20:53:51 | [32mINFO    [0m | __main__ | Starting PostgreSQL slow query collection...
2025-11-14 20:53:51 | [32mINFO    [0m | apscheduler.executors.default | Running job "Query Analyzer (trigger: interval[0:02:00], next run at: 2025-11-14 20:55:51 CET)" (scheduled at 2025-11-14 20:53:51.177702+01:00)
2025-11-14 20:53:51 | [32mINFO    [0m | __main__ | Starting MySQL slow query collection...
2025-11-14 20:53:51 | [31mERROR   [0m | backend.services.postgres_collector | âœ— PostgreSQL connection failed: connection to server at "127.0.0.1", port 5433 failed: Connection refused
	Is the server running on that host and accepting TCP/IP connections?

2025-11-14 20:53:51 | [32mINFO    [0m | __main__ | âœ“ PostgreSQL collection completed: 0 queries collected
2025-11-14 20:53:51 | [32mINFO    [0m | __main__ | Starting pending query analysis...
2025-11-14 20:53:51 | [31mERROR   [0m | backend.services.mysql_collector | âœ— MySQL connection failed: 2003 (HY000): Can't connect to MySQL server on '127.0.0.1:3307' (111)
2025-11-14 20:53:51 | [32mINFO    [0m | apscheduler.executors.default | Job "PostgreSQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:54:51 CET)" executed successfully
2025-11-14 20:53:51 | [32mINFO    [0m | __main__ | âœ“ MySQL collection completed: 0 queries collected
2025-11-14 20:53:51 | [32mINFO    [0m | apscheduler.executors.default | Job "MySQL Slow Query Collector (trigger: interval[0:01:00], next run at: 2025-11-14 20:54:51 CET)" executed successfully
2025-11-14 20:53:51 | [31mERROR   [0m | __main__ | âœ— Query analysis failed: (psycopg2.errors.UndefinedTable) relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^

[SQL: SELECT slow_queries.id AS slow_queries_id, slow_queries.fingerprint AS slow_queries_fingerprint, slow_queries.source_db_type AS slow_queries_source_db_type, slow_queries.source_db_host AS slow_queries_source_db_host, slow_queries.duration_ms AS slow_queries_duration_ms, slow_queries.captured_at AS slow_queries_captured_at, slow_queries.status AS slow_queries_status 
FROM slow_queries 
WHERE slow_queries.status = %(status_1)s 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'NEW', 'param_1': 50}]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedTable: relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/backend/services/scheduler.py", line 68, in analyze_pending_queries
    count = analyzer.analyze_all_pending(limit=50)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/backend/services/analyzer.py", line 444, in analyze_all_pending
    ).limit(limit).all()
                   ^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2693, in all
    return self._iter().all()  # type: ignore
           ^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2847, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2308, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1848, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
  File "/home/msiddi/Documents/personal/dbpower-ai-cloud/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "slow_queries" does not exist
LINE 2: FROM slow_queries 
             ^

[SQL: SELECT slow_queries.id AS slow_queries_id, slow_queries.fingerprint AS slow_queries_fingerprint, slow_queries.source_db_type AS slow_queries_source_db_type, slow_queries.source_db_host AS slow_queries_source_db_host, slow_queries.duration_ms AS slow_queries_duration_ms, slow_queries.captured_at AS slow_queries_captured_at, slow_queries.status AS slow_queries_status 
FROM slow_queries 
WHERE slow_queries.status = %(status_1)s 
 LIMIT %(param_1)s]
[parameters: {'status_1': 'NEW', 'param_1': 50}]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-11-14 20:53:51 | [32mINFO    [0m | apscheduler.executors.default | Job "Query Analyzer (trigger: interval[0:02:00], next run at: 2025-11-14 20:55:51 CET)" executed successfully
